<!DOCTYPE html>
<html lang="th" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title th:text="'‡∏£‡∏µ‡∏ß‡∏¥‡∏ß‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£ : ' + ${service}">‡∏£‡∏µ‡∏ß‡∏¥‡∏ß‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£</title>
  <link rel="stylesheet" th:href="@{/css/main.css}" />
  <style>
    .wrap{max-width:960px;margin:24px auto;padding:0 16px}
    .card{background:#fff;border:1px solid var(--border,#e5e7eb);border-radius:14px;padding:16px}
    .row{display:grid;grid-template-columns:1fr auto;align-items:center;gap:12px}
    .stars{font-size:18px;letter-spacing:2px;white-space:nowrap}
    .stars.small{font-size:16px}
    .muted{color:#6b7280}
    .btn{background:#0B63F6;color:#fff;border:none;border-radius:10px;padding:8px 12px;text-decoration:none}

    /* ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏£‡∏µ‡∏ß‡∏¥‡∏ß */
    .list{margin-top:16px}
    .item{display:grid;grid-template-columns:120px 1fr;gap:14px;padding:14px 0;border-top:1px solid #eee}
    .meta{display:flex;align-items:center;gap:10px;flex-wrap:wrap}
    .name{font-weight:700}
    .comment{margin-top:6px;white-space:pre-wrap}
    @media (max-width:640px){ .item{grid-template-columns:1fr} }
  </style>
</head>
<body>
<header class="top-nav">
  <a th:href="@{/home}" class="logo">Bar<span class="logo-accent">Ber</span>Shop</a>
  <nav class="nav-center">
    <a th:href="@{/home}">Home</a>
    <a th:href="@{/reviews}" class="active">Reviews</a>
  </nav>
</header>

<main class="wrap" th:with="avgInt=${T(java.lang.Math).round(avg)}">
  <h2 style="font-weight:800;margin:8px 0" th:text="'‡∏£‡∏µ‡∏ß‡∏¥‡∏ß : ' + ${service}">‡∏£‡∏µ‡∏ß‡∏¥‡∏ß : ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£</h2>

  <!-- ‡∏™‡∏£‡∏∏‡∏õ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô -->
  <section class="card row">
    <div>
      <div class="stars" aria-label="‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢">
        <span th:each="i : ${#numbers.sequence(1,5)}"
              th:text="${i <= avgInt} ? '‚òÖ' : '‚òÜ'">‚òÖ</span>
      </div>
      <div class="muted" style="margin-top:4px">
        <span th:text="${#numbers.formatDecimal(avg,1,1)}">0.0</span>
        ‡∏à‡∏≤‡∏Å <span th:text="${count}">0</span> ‡∏£‡∏µ‡∏ß‡∏¥‡∏ß
      </div>
    </div>
    <div>
      <a class="btn" th:href="@{/reviews}">‚Üê ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏£‡∏ß‡∏°</a>
    </div>
  </section>

  <!-- ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏£‡∏µ‡∏ß‡∏¥‡∏ß -->
  <section class="card list">
    <div th:if="${page.content.empty}">
      <p class="muted">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏µ‡∏ß‡∏¥‡∏ß‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ</p>
    </div>

    <div th:each="r : ${page.content}" class="item">
      <!-- ‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå‡∏ã‡πâ‡∏≤‡∏¢: ‡∏î‡∏≤‡∏ß‡∏Ç‡∏≠‡∏á‡∏£‡∏µ‡∏ß‡∏¥‡∏ß‡∏ô‡∏±‡πâ‡∏ô -->
      <div>
        <div class="stars small" aria-label="‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏µ‡∏ß‡∏¥‡∏ß">
          <span th:each="i : ${#numbers.sequence(1,5)}"
                th:text="${i <= r.rating} ? '‚òÖ' : '‚òÜ'">‚òÖ</span>
        </div>
      </div>

      <!-- ‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå‡∏Ç‡∏ß‡∏≤: ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ/‡πÄ‡∏ß‡∏•‡∏≤/‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå -->
      <div>
        <div class="meta">
          <span class="name" th:text="${r.username}">username</span>
          <span class="muted" th:if="${r.barber}" th:text="'‡∏ä‡πà‡∏≤‡∏á: ' + ${r.barber}">‡∏ä‡πà‡∏≤‡∏á</span>
          <span class="muted"
                th:text="${#temporals.format(r.createdAt, 'dd/MM/yyyy HH:mm')}">‚Äî</span>
        </div>

        <div class="comment"
             th:text="${#strings.isEmpty(r.comment) ? '‚Äî ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° ‚Äî' : r.comment}">
          ‚Äî ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° ‚Äî
        </div>
      </div>
    </div>

    <!-- ‡πÄ‡∏û‡∏à‡πÄ‡∏ô‡∏ä‡∏±‡∏ô -->
    <div style="display:flex;gap:8px;align-items:center;justify-content:center;margin-top:12px"
         th:if="${page.totalPages > 1}">
      <a class="btn" th:if="${!page.first}"
         th:href="@{'/reviews/service/' + ${service} + '(?page=' + ${page.number} + ')'}">‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤</a>

      <span class="muted" th:text="${page.number + 1} + ' / ' + ${page.totalPages}">1 / 1</span>

      <a class="btn" th:if="${!page.last}"
         th:href="@{'/reviews/service/' + ${service} + '(?page=' + ${page.number + 2} + ')'}">‡∏ñ‡∏±‡∏î‡πÑ‡∏õ</a>
    </div>
  </section>
</main>

<nav class="bottom-nav">
  <a th:href="@{/profile}"><span class="ico">üë§</span><span>‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå</span></a>
  <a th:href="@{/reviews}" class="active"><span class="ico">‚≠ê</span><span>‡∏£‡∏µ‡∏ß‡∏¥‡∏ß</span></a>
  <a th:href="@{/all-bookings}"><span class="ico">üìã</span><span>‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥</span></a>
</nav>
</body>
</html>
